[ 1367.118149] CPU: 4 PID: 6266 Comm: test Tainted: G           OE    4.16.0-rc5-michael23 #3
[ 1367.118150] Hardware name: LENOVO 90H0000CCD/36C5, BIOS O2TKT41A 10/20/2017
[ 1367.118151] Call Trace:
[ 1367.118155]  dump_stack+0x63/0x82
[ 1367.118158]  print_address_description+0x70/0x290
[ 1367.118160]  kasan_report+0x291/0x390
[ 1367.118185]  ? i915_ppgtt_close+0x209/0x270 [i915]
[ 1367.118187]  __asan_report_store1_noabort+0x1c/0x20
[ 1367.118206]  i915_ppgtt_close+0x209/0x270 [i915]
[ 1367.118209]  ? __mutex_lock.isra.2+0x696/0xa50
[ 1367.118229]  ? i915_ppgtt_init_hw+0x9c0/0x9c0 [i915]
[ 1367.118251]  context_close+0x312/0x560 [i915]
[ 1367.118281]  ? i915_gem_context_release+0x1b0/0x1b0 [i915]
[ 1367.118283]  ? get_futex_key+0xc70/0xc70
[ 1367.118314]  i915_gem_context_destroy_ioctl+0x1b9/0x260 [i915]
[ 1367.118345]  ? i915_gem_context_create_ioctl+0x2c0/0x2c0 [i915]
[ 1367.118359]  drm_ioctl_kernel+0x13f/0x1c0 [drm]
[ 1367.118372]  drm_ioctl+0x736/0xa60 [drm]
[ 1367.118402]  ? i915_gem_context_create_ioctl+0x2c0/0x2c0 [i915]
[ 1367.118415]  ? drm_version+0x3a0/0x3a0 [drm]
[ 1367.118418]  ? exit_robust_list+0x140/0x140
[ 1367.118420]  ? process_echoes+0x130/0x130
[ 1367.118422]  ? __vfs_write+0xee/0x860
[ 1367.118424]  ? kernel_read+0x130/0x130
[ 1367.118427]  do_vfs_ioctl+0x1af/0xf10
[ 1367.118429]  ? ioctl_preallocate+0x1c0/0x1c0
[ 1367.118431]  ? __fsnotify_inode_delete+0x20/0x20
[ 1367.118433]  ? do_futex+0x15a0/0x15a0
[ 1367.118435]  ? SyS_futex+0xf2/0x280
[ 1367.118437]  ? vfs_write+0x301/0x4a0
[ 1367.118439]  ? do_futex+0x15a0/0x15a0
[ 1367.118441]  ? __fget_light+0x82/0x210
[ 1367.118442]  SyS_ioctl+0x79/0x90
[ 1367.118444]  ? do_vfs_ioctl+0xf10/0xf10
[ 1367.118446]  do_syscall_64+0x197/0x440
[ 1367.118449]  entry_SYSCALL_64_after_hwframe+0x3d/0xa2
[ 1367.118451] RIP: 0033:0x7fa9dc766f47
[ 1367.118452] RSP: 002b:00007fa9a5dfbf38 EFLAGS: 00000206 ORIG_RAX: 0000000000000010
[ 1367.118454] RAX: ffffffffffffffda RBX: 0000000000000000 RCX: 00007fa9dc766f47
[ 1367.118456] RDX: 0000000000601080 RSI: 000000004008646e RDI: 0000000000000003
[ 1367.118457] RBP: 00007fa9a5dfbf50 R08: 0000000000000000 R09: 000000000000000f
[ 1367.118458] R10: 0000000000000000 R11: 0000000000000206 R12: 0000000000000000
[ 1367.118459] R13: 00007ffea2792ddf R14: 00007fa9a5dfc9c0 R15: 0000000000000000

[ 1367.118462] Allocated by task 6157:
[ 1367.118464]  save_stack+0x46/0xd0
[ 1367.118466]  kasan_kmalloc+0xad/0xe0
[ 1367.118467]  kmem_cache_alloc_trace+0xf3/0x210
[ 1367.118486]  i915_ppgtt_create+0x5c/0x2330 [i915]
[ 1367.118504]  i915_gem_create_context+0xb8/0x380 [i915]
[ 1367.118527]  i915_gem_context_create_ioctl+0x138/0x2c0 [i915]
[ 1367.118534]  drm_ioctl_kernel+0x13f/0x1c0 [drm]
[ 1367.118542]  drm_ioctl+0x736/0xa60 [drm]
[ 1367.118543]  do_vfs_ioctl+0x1af/0xf10
[ 1367.118544]  SyS_ioctl+0x79/0x90
[ 1367.118546]  do_syscall_64+0x197/0x440
[ 1367.118548]  entry_SYSCALL_64_after_hwframe+0x3d/0xa2

[ 1367.118549] Freed by task 231:
[ 1367.118551]  save_stack+0x46/0xd0
[ 1367.118552]  __kasan_slab_free+0x13e/0x1a0
[ 1367.118553]  kasan_slab_free+0xe/0x10
[ 1367.118554]  kfree+0x98/0x1d0
[ 1367.118576]  i915_ppgtt_release+0x109/0x270 [i915]
[ 1367.118599]  i915_gem_context_free+0x281/0x340 [i915]
[ 1367.118622]  contexts_free_worker+0x66/0x90 [i915]
[ 1367.118624]  process_one_work+0x4db/0x10b0
[ 1367.118625]  worker_thread+0xde/0x1300
[ 1367.118627]  kthread+0x2b1/0x3a0
[ 1367.118629]  ret_from_fork+0x35/0x40

[ 1367.118631] The buggy address belongs to the object at ffff88042e64a100
                which belongs to the cache kmalloc-8192 of size 8192
[ 1367.118634] The buggy address is located 872 bytes inside of
                8192-byte region [ffff88042e64a100, ffff88042e64c100)
[ 1367.118636] The buggy address belongs to the page:
[ 1367.118638] page:ffffea0010b99200 count:1 mapcount:0 mapping:0000000000000000 index:0x0 compound_mapcount: 0
[ 1367.118641] flags: 0x17ffffc0008100(slab|head)
[ 1367.118644] raw: 0017ffffc0008100 0000000000000000 0000000000000000 0000000100030003
[ 1367.118646] raw: 0000000000000000 0000000200000001 ffff8803d280e680 0000000000000000
[ 1367.118647] page dumped because: kasan: bad access detected

[ 1367.118649] Memory state around the buggy address:
[ 1367.118650]  ffff88042e64a300: fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
[ 1367.118651]  ffff88042e64a380: fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
[ 1367.118652] >ffff88042e64a400: fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
[ 1367.118654]                                                           ^
[ 1367.118655]  ffff88042e64a480: fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
[ 1367.118657]  ffff88042e64a500: fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb fb
[ 1367.118658] ==================================================================

